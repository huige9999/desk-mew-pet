<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Copilot SVG Pet Demo</title>
  <style>
    :root{
      background:#111;
      color:#ddd;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,"PingFang SC","Microsoft Yahei";
    }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      gap:16px;
    }

    /* 舞台只是为了看清楚 */
    .stage{
      display:grid;
      place-items:center;
      gap:10px;
    }

    /* 宠物容器：所有动画都作用在这层 */
    .pet{
      width: 120px;
      height: 120px;
      display:grid;
      place-items:center;

      /* 让变形看起来更像“底部站地面” */
      transform-origin: 50% 85%;
      user-select:none;
      cursor:pointer;
    }

    /* SVG 本体 */
    .pet svg{
      width: 100%;
      height: 100%;
      display:block;
      /* 用 currentColor 控色 */
      color: #f3f3f3;
      filter: drop-shadow(0 14px 24px rgba(0,0,0,.45));
    }

    /* ===== 状态：idle =====
       轻微呼吸 + 轻摆（不装可爱会死） */
    .state-idle{
      animation: idle-breathe 1.6s ease-in-out infinite;
    }
    .state-idle svg{
      animation: idle-wiggle 2.4s ease-in-out infinite;
    }

    @keyframes idle-breathe{
      0%,100%{ transform: translateY(0) scale(1); }
      50%    { transform: translateY(1px) scale(1.03); }
    }
    @keyframes idle-wiggle{
      0%,100%{ transform: rotate(-2deg); }
      50%    { transform: rotate(2deg); }
    }

    /* ===== 状态：drag =====
       被拎起来：压扁拉长 + 抖动 */
    .state-drag{
      animation: drag-squash 0.35s ease-in-out infinite alternate;
    }
    .state-drag svg{
      animation: drag-shake 0.12s linear infinite;
      color: #eaeaea;
    }
    @keyframes drag-squash{
      from { transform: translateY(-6px) scaleX(1.08) scaleY(0.95); }
      to   { transform: translateY(-8px) scaleX(0.95) scaleY(1.08); }
    }
    @keyframes drag-shake{
      0%{ transform: translateX(0) rotate(0deg); }
      25%{ transform: translateX(-1px) rotate(-2deg); }
      50%{ transform: translateX(0) rotate(0deg); }
      75%{ transform: translateX(1px) rotate(2deg); }
      100%{ transform: translateX(0) rotate(0deg); }
    }

    /* ===== 状态：tap_react（一次性）=====
       弹一下 + 闪一下（用滤镜/颜色模拟“被点到了”） */
    .state-tap{
      animation: tap-pop 420ms cubic-bezier(.2,.9,.2,1) 1;
    }
    .state-tap svg{
      animation: tap-flash 420ms ease-out 1;
    }
    @keyframes tap-pop{
      0%   { transform: translateY(0) scale(1); }
      30%  { transform: translateY(-10px) scale(1.12); }
      55%  { transform: translateY(2px)  scaleX(1.06) scaleY(0.92); }
      100% { transform: translateY(0) scale(1); }
    }
    @keyframes tap-flash{
      0%   { color:#ffffff; filter: drop-shadow(0 14px 24px rgba(0,0,0,.45)); }
      30%  { color:#ffe8a3; filter: drop-shadow(0 14px 24px rgba(255,232,163,.35)); }
      100% { color:#f3f3f3; filter: drop-shadow(0 14px 24px rgba(0,0,0,.45)); }
    }

    .hint{
      text-align:center;
      font-size:14px;
      line-height:1.7;
      opacity:.9;
    }
    code{ color:#9cdcfe; }
  </style>
</head>
<body>
  <div class="stage">
    <div id="pet" class="pet state-idle" title="点击触发 tap_react"></div>
    <div class="hint">
      按 <code>1</code>=idle / <code>2</code>=drag / <code>3</code>=tap_react（一次性）<br/>
      点击宠物也会触发 <code>tap_react</code>
    </div>
  </div>

  <script>
    const pet = document.getElementById("pet");

    // 你的 SVG（原封不动塞进来）
    pet.innerHTML = `<svg fill="currentColor" fill-rule="evenodd" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M19.245 5.364c1.322 1.36 1.877 3.216 2.11 5.817.622 0 1.2.135 1.592.654l.73.964c.21.278.323.61.323.955v2.62c0 .339-.173.669-.453.868C20.239 19.602 16.157 21.5 12 21.5c-4.6 0-9.205-2.583-11.547-4.258-.28-.2-.452-.53-.453-.868v-2.62c0-.345.113-.679.321-.956l.73-.963c.392-.517.974-.654 1.593-.654l.029-.297c.25-2.446.81-4.213 2.082-5.52 2.461-2.54 5.71-2.851 7.146-2.864h.198c1.436.013 4.685.323 7.146 2.864zm-7.244 4.328c-.284 0-.613.016-.962.05-.123.447-.305.85-.57 1.108-1.05 1.023-2.316 1.18-2.994 1.18-.638 0-1.306-.13-1.851-.464-.516.165-1.012.403-1.044.996a65.882 65.882 0 00-.063 2.884l-.002.48c-.002.563-.005 1.126-.013 1.69.002.326.204.63.51.765 2.482 1.102 4.83 1.657 6.99 1.657 2.156 0 4.504-.555 6.985-1.657a.854.854 0 00.51-.766c.03-1.682.006-3.372-.076-5.053-.031-.596-.528-.83-1.046-.996-.546.333-1.212.464-1.85.464-.677 0-1.942-.157-2.993-1.18-.266-.258-.447-.661-.57-1.108-.32-.032-.64-.049-.96-.05zm-2.525 4.013c.539 0 .976.426.976.95v1.753c0 .525-.437.95-.976.95a.964.964 0 01-.976-.95v-1.752c0-.525.437-.951.976-.951zm5 0c.539 0 .976.426.976.95v1.753c0 .525-.437.95-.976.95a.964.964 0 01-.976-.95v-1.752c0-.525.437-.951.976-.951zM7.635 5.087c-1.05.102-1.935.438-2.385.906-.975 1.037-.765 3.668-.21 4.224.405.394 1.17.657 1.995.657h.09c.649-.013 1.785-.176 2.73-1.11.435-.41.705-1.433.675-2.47-.03-.834-.27-1.52-.63-1.813-.39-.336-1.275-.482-2.265-.394zm6.465.394c-.36.292-.6.98-.63 1.813-.03 1.037.24 2.06.675 2.47.968.957 2.136 1.104 2.776 1.11h.044c.825 0 1.59-.263 1.995-.657.555-.556.765-3.187-.21-4.224-.45-.468-1.335-.804-2.385-.906-.99-.088-1.875.058-2.265.394zM12 7.615c-.24 0-.525.015-.84.044.03.16.045.336.06.526l-.001.159a2.94 2.94 0 01-.014.25c.225-.022.425-.027.612-.028h.366c.187 0 .387.006.612.028-.015-.146-.015-.277-.015-.409.015-.19.03-.365.06-.526a9.29 9.29 0 00-.84-.044z"></path>
    </svg>`;

    let state = "idle";
    let backTimer = null;

    function setState(next){
      state = next;

      pet.classList.remove("state-idle","state-drag","state-tap");
      if(next === "idle") pet.classList.add("state-idle");
      if(next === "drag") pet.classList.add("state-drag");
      if(next === "tap")  pet.classList.add("state-tap");

      // tap 是一次性：播完回 idle
      if(next === "tap"){
        if(backTimer) clearTimeout(backTimer);
        backTimer = setTimeout(() => setState("idle"), 420);
      }
    }

    window.addEventListener("keydown", (e)=>{
      if(e.key === "1") setState("idle");
      if(e.key === "2") setState("drag");
      if(e.key === "3") setState("tap");
    });

    pet.addEventListener("click", ()=> setState("tap"));

    // 模拟拖拽：按住鼠标进入 drag，松开回 idle
    pet.addEventListener("pointerdown", ()=> setState("drag"));
    window.addEventListener("pointerup", ()=> { if(state==="drag") setState("idle"); });

    setState("idle");
  </script>
</body>
</html>
